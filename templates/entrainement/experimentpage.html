{% extends "layout.html" %}

{% block title %}Experiment - {{ experiment_name }}{% endblock %}

{% block head_extra %}
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
<style>
  .scroll-container {
    display: flex;
    overflow-x: auto;
    gap: 16px;
    padding: 16px 0;
    scrollbar-width: thin;
  }
  
  .scroll-container::-webkit-scrollbar {
    height: 8px;
  }
  
  .scroll-container::-webkit-scrollbar-thumb {
    background: #cbd5e0;
    border-radius: 4px;
    transition: background 0.3s;
  }
  
  .scroll-container::-webkit-scrollbar-thumb:hover {
    background: #a0aec0;
  }
  
  .feature-column {
    min-width: 220px;
    border-radius: 8px;
    background: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
    transition: all 0.3s ease;
  }
  
  .feature-column:hover {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  
  .column-header {
    padding: 12px 16px;
    font-weight: 600;
    font-size: 14px;
    color: #4a5568;
    border-bottom: 1px solid #e2e8f0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: #f7fafc;
    border-radius: 8px 8px 0 0;
  }
  
  .feature-items {
    padding: 8px;
  }
  
  .feature-item {
    padding: 12px;
    margin: 4px 0;
    border-radius: 6px;
    background: #f8fafc;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }
  
  .feature-item:hover {
    background: #edf2f7;
    transform: translateY(-2px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }
  
  .feature-item.selected {
    background: #ebf8ff;
    border-color: #90cdf4;
    color: #2b6cb0;
  }
  
  .feature-icon {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #e2e8f0;
    border-radius: 4px;
    color: #4a5568;
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .feature-item.selected .feature-icon {
    background: #bee3f8;
    color: #3182ce;
  }
  
  .feature-content {
    flex-grow: 1;
  }
  
  .feature-title {
    font-weight: 500;
    font-size: 13px;
    margin-bottom: 2px;
  }
  
  .feature-desc {
    font-size: 11px;
    color: #718096;
  }
  
  .feature-item.selected .feature-desc {
    color: #4299e1;
  }
  
  .content-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 400px;
    height: 100vh;
    background: white;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
    z-index: 100;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
  }
  
  .content-panel.active {
    transform: translateX(0);
  }
  
  .panel-header {
    padding: 16px;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .panel-title {
    font-weight: 600;
    font-size: 16px;
  }
  
  .close-panel {
    cursor: pointer;
    color: #718096;
    font-size: 20px;
  }
  
  .panel-body {
    padding: 16px;
  }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Experiment Dashboard</h1>
      <p class="text-gray-600">Configure your machine learning workflow</p>
    </div>
    <div class="flex space-x-3">
      <button class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg flex items-center space-x-2">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </button>
      <button class="px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center space-x-2">
        <i class="fas fa-play"></i>
        <span>Run Experiment</span>
      </button>
    </div>
  </div>

  <div class="scroll-container">
    <!-- FEATURES Column -->
    <div class="feature-column">
      <div class="column-header">Features</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="features" data-item="feature_selection">
          <div class="feature-icon">
            <i class="fas fa-sliders-h"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Feature Selection</div>
            <div class="feature-desc">Select relevant features</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="features" data-item="feature_engineering">
          <div class="feature-icon">
            <i class="fas fa-table"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Feature Engineering</div>
            <div class="feature-desc">Create new features</div>
          </div>
        </div>
      </div>
    </div>

    <!-- DIMENSION REDUCTION Column -->
    <div class="feature-column">
      <div class="column-header">Dimension Reduction</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="dimension_reduction" data-item="pca">
          <div class="feature-icon">
            <i class="fas fa-project-diagram"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">PCA</div>
            <div class="feature-desc">Principal Component Analysis</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="dimension_reduction" data-item="tsne">
          <div class="feature-icon">
            <i class="fas fa-braille"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">t-SNE</div>
            <div class="feature-desc">t-distributed SNE</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="dimension_reduction" data-item="umap">
          <div class="feature-icon">
            <i class="fas fa-atom"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">UMAP</div>
            <div class="feature-desc">Uniform Manifold Approximation</div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODELS Column -->
    <div class="feature-column">
      <div class="column-header">Models</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="models" data-item="neural_network">
          <div class="feature-icon">
            <i class="fas fa-network-wired"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Neural Network</div>
            <div class="feature-desc">Deep learning model</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="models" data-item="random_forest">
          <div class="feature-icon">
            <i class="fas fa-tree"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Random Forest</div>
            <div class="feature-desc">Ensemble of decision trees</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="models" data-item="xgboost">
          <div class="feature-icon">
            <i class="fas fa-arrow-up"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">XGBoost</div>
            <div class="feature-desc">Gradient boosting framework</div>
          </div>
        </div>
      </div>
    </div>

    <!-- EVALUATION Column -->
    <div class="feature-column">
      <div class="column-header">Evaluation</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="evaluation" data-item="metrics">
          <div class="feature-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Metrics</div>
            <div class="feature-desc">Performance evaluation</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="evaluation" data-item="confusion_matrix">
          <div class="feature-icon">
            <i class="fas fa-border-all"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Confusion Matrix</div>
            <div class="feature-desc">Classification results</div>
          </div>
        </div>
      </div>
    </div>

    <!-- DATA AUGMENTATION Column -->
    <div class="feature-column">
      <div class="column-header">Data Augmentation</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="data_augmentation" data-item="image_augmentation">
          <div class="feature-icon">
            <i class="fas fa-expand"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Image Augmentation</div>
            <div class="feature-desc">Expand image dataset</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="data_augmentation" data-item="smote">
          <div class="feature-icon">
            <i class="fas fa-random"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">SMOTE</div>
            <div class="feature-desc">Synthetic minority oversampling</div>
          </div>
        </div>
      </div>
    </div>

    <!-- HYPERPARAMETERS Column -->
    <div class="feature-column">
      <div class="column-header">Hyperparameters</div>
      <div class="feature-items">
        <div class="feature-item flex items-center" data-category="hyperparameters" data-item="grid_search">
          <div class="feature-icon">
            <i class="fas fa-th"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Grid Search</div>
            <div class="feature-desc">Exhaustive search</div>
          </div>
        </div>
        <div class="feature-item flex items-center" data-category="hyperparameters" data-item="random_search">
          <div class="feature-icon">
            <i class="fas fa-dice"></i>
          </div>
          <div class="feature-content">
            <div class="feature-title">Random Search</div>
            <div class="feature-desc">Random sampling</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content Panel -->
<div id="contentPanel" class="content-panel">
  <div class="panel-header">
    <div class="panel-title" id="panelTitle">Panel Title</div>
    <div class="close-panel">&times;</div>
  </div>
  <div class="panel-body" id="panelContent">
    <!-- Content will be loaded here -->
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Feature item click handler
  document.querySelectorAll('.feature-item').forEach(item => {
    item.addEventListener('click', function() {
      // Toggle selected class
      this.classList.toggle('selected');
      
      // Get item data
      const category = this.getAttribute('data-category');
      const itemName = this.getAttribute('data-item');
      
      // Show content panel
      showContentPanel(category, itemName);
    });
  });
  // Close panel handler
  document.querySelector('.close-panel').addEventListener('click', function() {
    document.getElementById('contentPanel').classList.remove('active');
  });
  
  // Function to show content panel
  function showContentPanel(category, itemName) {
    const panel = document.getElementById('contentPanel');
    const panelTitle = document.getElementById('panelTitle');
    const panelContent = document.getElementById('panelContent');
    
    // Set panel title
    panelTitle.textContent = getTitleForItem(itemName);
    
    // Set panel content based on the item
    let content = '';
    switch(itemName) {
      case 'feature_selection':
        content = `
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Feature Selection Method</label>
              <select class="w-full border rounded-md px-3 py-2">
                <option>Select features manually</option>
                <option>Select by correlation</option>
                <option>Select by importance</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Number of Features</label>
              <input type="number" min="1" value="10" class="w-full border rounded-md px-3 py-2">
            </div>
            <button class="w-full bg-blue-600 text-white py-2 rounded-md mt-4">
              Select Features
            </button>
          </div>
        `;
        break;
      case 'pca':
        content = `
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Number of Components</label>
              <input type="number" min="1" value="2" class="w-full border rounded-md px-3 py-2">
            </div>
            <div>
              <label class="flex items-center space-x-2">
                <input type="checkbox" checked class="rounded">
                <span class="text-sm text-gray-700">Normalize data</span>
              </label>
            </div>
            <button class="w-full bg-blue-600 text-white py-2 rounded-md mt-4">
              Apply PCA
            </button>
          </div>
        `;
        break;
      // Add more cases for other items as needed
      default:
        content = `
          <div class="text-center py-8">
            <div class="text-gray-500 mb-2">
              <i class="fas fa-cog fa-2x"></i>
            </div>
            <h3 class="font-medium text-gray-700">${getTitleForItem(itemName)} Configuration</h3>
            <p class="text-sm text-gray-500 mt-1">Configure your ${getTitleForItem(itemName)} settings here</p>
          </div>
        `;
    }
    
    panelContent.innerHTML = content;
    panel.classList.add('active');
  }
  
  // Helper function to get display title for items
  function getTitleForItem(itemName) {
    const titles = {
      'feature_selection': 'Feature Selection',
      'feature_engineering': 'Feature Engineering',
      'pca': 'PCA',
      'tsne': 't-SNE',
      'umap': 'UMAP',
      'neural_network': 'Neural Network',
      'random_forest': 'Random Forest',
      'xgboost': 'XGBoost',
      'metrics': 'Evaluation Metrics',
      'confusion_matrix': 'Confusion Matrix',
      'image_augmentation': 'Image Augmentation',
      'smote': 'SMOTE',
      'grid_search': 'Grid Search',
      'random_search': 'Random Search'
    };
    return titles[itemName] || itemName;
  }
});
</script>
{% endblock %} 